{"version":3,"sources":["components/Person.js","components/Persons.js","components/PersonForm.js","components/Filter.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Person","persons","remove","name","number","onClick","id","Persons","newFilter","filter","person","toLowerCase","includes","map","PersonForm","addNumbers","newName","newNum","handleNameChange","handleNumberChange","onSubmit","value","onChange","type","Filter","handleFilterChange","baseUrl","exportObj","getAll","axios","get","then","response","data","create","perObj","post","update","newObj","put","delete","Notification","message","className","App","props","useState","setPersons","setNewName","setNewNum","setNewFilter","setMessage","setType","useEffect","console","log","personservice","initialPersons","catch","error","sameName","find","event","target","preventDefault","window","confirm","changedperson","returnedPersons","setTimeout","status","p","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ea7c99a2.chunk.js","sourcesContent":["import React from 'react'\n\nconst Person = ({persons, remove}) => {\n  return (\n    <li>\n      {persons.name} {persons.number} <button onClick = {() => remove(persons.id, persons.name)}>delete</button>\n    </li>\n  )\n}\n\nexport default Person\n","import React from 'react'\nimport Person from './Person'\n\nconst Persons = ({persons, newFilter, remove}) => {\n    return(\n      <ul>\n        {persons.filter(person => person.name.toLowerCase().includes(newFilter.toLowerCase())).map(person =>\n          <Person key = {person.name} persons = {person} remove = {remove}/>\n        )}\n      </ul>\n    )\n}\n\nexport default Persons\n","import React from 'react'\n\nconst PersonForm = ({addNumbers, newName, newNum, handleNameChange, handleNumberChange}) => {\n  return (\n    <form onSubmit = {addNumbers}>\n      <div>\n        name: <input value = {newName}\n                  onChange = {handleNameChange}/>\n      </div>\n      <div>\n        number: <input value = {newNum}\n                    onChange = {handleNumberChange}/>\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nexport default PersonForm\n","import React from 'react'\n\nconst Filter = ({newFilter, handleFilterChange}) => {\n  return (\n    <form>\n      <div>\n        filter showm with: <input value = {newFilter}\n                               onChange = {handleFilterChange}/>\n      </div>\n    </form>\n  )\n}\n\nexport default Filter\n","import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = (perObj) => {\n  const request = axios.post(baseUrl, perObj)\n  return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObj) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObj)\n  return request.then(response => response.data)\n}\n\nconst exportObj = {\n  getAll,\n  create,\n  update,\n  remove\n}\nexport default exportObj\n","import React from 'react'\n\nconst Notification = ({ message, type }) => {\n  if(message === null) {\n    return null\n  }\n  return (\n    <div className = {type}>\n    {message}\n    </div>\n  )\n}\n\nexport default Notification\n","import React, {useState, useEffect} from 'react'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport personservice from './services/persons'\nimport Notification from './components/Notification'\n\nconst App = (props) => {\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNum, setNewNum] = useState('')\n  const [ newFilter, setNewFilter] = useState('')\n  const [ message, setMessage] = useState(null)\n  const [ type, setType] = useState('')\n\n  useEffect(() => {\n    console.log('effect')\n    personservice\n    .getAll()\n    .then(initialPersons => {\n      console.log('promise fulfilled')\n      setPersons(initialPersons)\n    })\n    .catch(error => {\n      console.log(error.response.data)\n    })\n  }, [])\n\n  const sameName = persons.find(person => person.name === newName)\n\n  const addNumbers = (event) => {\n    event.preventDefault()\n    if(sameName) {\n      if(window.confirm(newName + ' is already added to phonebook, replace the old number with a new one?')){\n        const changedperson = {...sameName, number: newNum}\n        console.log('changed... ',changedperson)\n        personservice\n          .update(changedperson.id, changedperson)\n          .then(returnedPersons => {\n            setPersons(persons.map(person => person.id !== changedperson.id ? person : returnedPersons))\n            setMessage(`Changed ${newName}'s number`)\n            setType('success')\n            setTimeout(() => {setMessage(null)}, 5000)\n          })\n          .catch(error => {\n            setType('error')\n            if(error.response.status === 404){\n              setMessage(`${newName} has already been deleted from server`)\n              setPersons(persons.filter(p => p.id !== sameName.id))\n            } else {\n              setMessage(error.response.data.error)\n            }\n            setTimeout(() => {setMessage(null)}, 5000)\n          })\n      }\n    } else {\n      const perObj = {\n        name: newName,\n        number: newNum\n      }\n      personservice\n        .create(perObj)\n        .then(returnedPersons => {\n          setPersons(persons.concat(returnedPersons))\n          setMessage(`Added  ${newName}`)\n          setType('success')\n          setTimeout(() => {setMessage(null)}, 5000)\n        })\n        .catch(error => {\n          setMessage(error.response.data.error)\n          setType('error')\n          setTimeout(() => {setMessage(null)}, 5000)\n        })\n    }\n    setNewName('')\n    setNewNum('')\n  }\n\n  const deleteNumbers = (id, name) => {\n    if(window.confirm(`Delete ${name}`)) {\n      personservice\n        .remove(id)\n        .then(() => {\n          setPersons(persons.filter(person => person.id !== id))\n          setMessage(`Deleted ${name}`)\n          setType('success')\n          setTimeout(() => {setMessage(null)}, 5000)\n        })\n    }\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNum(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setNewFilter(event.target.value)\n  }\n  //console.log(persons.map(person => person.name.toLowerCase().includes(newFilter.toLowerCase())))\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message = {message} type = {type}/>\n      <Filter newFilter = {newFilter} handleFilterChange = {handleFilterChange}/>\n      <h3>add a new</h3>\n      <PersonForm addNumbers = {addNumbers} newName = {newName} newNum = {newNum}\n        handleNameChange = {handleNameChange} handleNumberChange = {handleNumberChange} />\n      <h2>Numbers</h2>\n      <Persons persons = {persons} newFilter = {newFilter} remove = {deleteNumbers}/>\n    </div>\n  )\n}\n\nexport default App\n","import ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}